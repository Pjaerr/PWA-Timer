var cacheName = 'timerPWA-1', filesToCache = ['/', '/index.html', '/PWA-Timer/index.html', '/app.js', '/background_process.js', '/materialize', '/alarm.mp3', '/manifest.json']; self.addEventListener('install', function (a) { console.log('[ServiceWorker] Install'), a.waitUntil(caches.open(cacheName).then(function (b) { return console.log('[ServiceWorker] Caching app shell'), b.addAll(filesToCache) }).catch(b => { console.log(b) })) }), self.addEventListener('activate', function (a) { return console.log('[ServiceWorker] Activate'), a.waitUntil(caches.keys().then(function (b) { return Promise.all(b.map(function (c) { if (c !== cacheName) return console.log('[ServiceWorker] Removing old cache', c), caches.delete(c) })) })), self.clients.claim() }), self.addEventListener('fetch', function (a) { console.log('[ServiceWorker] Fetch', a.request.url), a.respondWith(caches.match(a.request).then(function (b) { return b || fetch(a.request) })) });
